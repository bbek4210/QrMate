"use strict";(()=>{var e={};e.id=438,e.ids=[438,660],e.modules={355:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{config:()=>g,default:()=>x,getServerSideProps:()=>f,getStaticPaths:()=>h,getStaticProps:()=>p,reportWebVitals:()=>w,routeModule:()=>y,unstable_getServerProps:()=>b,unstable_getServerSideProps:()=>_,unstable_getStaticParams:()=>C,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>j});var a=s(7093),l=s(5244),n=s(1323),i=s(1682),o=s.n(i),d=s(8141),c=s.n(d),u=s(9024),m=e([u]);u=(m.then?(await m)():m)[0];let x=(0,n.l)(u,"default"),p=(0,n.l)(u,"getStaticProps"),h=(0,n.l)(u,"getStaticPaths"),f=(0,n.l)(u,"getServerSideProps"),g=(0,n.l)(u,"config"),w=(0,n.l)(u,"reportWebVitals"),j=(0,n.l)(u,"unstable_getStaticProps"),v=(0,n.l)(u,"unstable_getStaticPaths"),C=(0,n.l)(u,"unstable_getStaticParams"),b=(0,n.l)(u,"unstable_getServerProps"),_=(0,n.l)(u,"unstable_getServerSideProps"),y=new a.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/ConnectedUser",pathname:"/ConnectedUser",bundlePath:"",filename:""},components:{App:c(),Document:o()},userland:u});r()}catch(e){r(e)}})},3212:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.d(t,{Z:()=>j});var a=s(997),l=s(6689),n=s(9752),i=s(9332),o=s(4866),d=s(5364),c=s(2129),u=s(2966),m=s(1644),x=s(6032),p=s(5433),h=s(6707),f=s(7773),g=e([n,o,d,p,h,f]);[n,o,d,p,h,f]=g.then?(await g)():g;let w=e=>new Promise((t,s)=>{let r=document.createElement("canvas"),a=r.getContext("2d"),l=new Image;l.onload=()=>{r.width=l.width,r.height=l.height,a?.drawImage(l,0,0);let e=r.toDataURL("image/jpeg",.8);t(e)},l.onerror=()=>{s(Error("Failed to load image"))};let n=URL.createObjectURL(e);l.src=n,l.onload=()=>{URL.revokeObjectURL(n)}}),j=({networkId:e,eventTitle:t,telegramAccount:s,baseEventId:r,onSaved:g})=>{let j=(0,n.useQueryClient)(),v=(0,i.useSearchParams)(),C=v?.get("ref")==="scanner",[b,_]=(0,l.useState)([]),[y,N]=(0,l.useState)([]),[k,S]=(0,l.useState)(""),[Z,E]=(0,l.useState)(!1),[L,M]=(0,l.useState)(""),[P,D]=(0,l.useState)([]),[H,I]=(0,l.useState)(!1),[R,U]=(0,l.useState)(!1),{data:$,isLoading:F}=(0,f.Z)(e),q=(0,p.Z)(),V=(0,h.Z)();(0,l.useEffect)(()=>{if(console.log("SelfieNote data received:",$),$){let e=$.summary_note||"",t=$.meeting_images?.map(e=>e.image)||[];console.log("Setting note:",e),console.log("Setting images:",t),S(e),M(e),_(t),D(t),E(!1);let s=""!==e.trim()||t.length>0;U(s),I(s)}},[$]),(0,l.useEffect)(()=>{if(H)return;let e=k!==L,t=b.length!==P.length||b.some((e,t)=>e!==P[t]);E(e||t)},[k,b,L,P,H]),(0,l.useEffect)(()=>{function e(){let e=document.getElementById("summary_note_textarea"),t=window.visualViewport?.height||window.innerHeight;if(e){let s=e.getBoundingClientRect();t-s.bottom<100&&e.scrollIntoView({behavior:"smooth",block:"center"})}}return window.visualViewport?.addEventListener("resize",e),()=>{window.visualViewport?.removeEventListener("resize",e)}},[]);let z=async t=>{let s=$?.meeting_images?.map(e=>({note:"",image:e.image}))||[];try{let a=[],l=t??y;if(l.length>0&&!q.isPending){let e=l.map(e=>{let t=e.name.split(".").pop()||"jpg",s=`zefe_selfies/selfie-${Date.now()}.${t}`;return q.mutateAsync({file:e,key:s})});a=(await Promise.all(e)).map(e=>({note:"",image:e?.data?.file_url})),console.log({newImages:a})}let n={network_id:e,base_event_id:r,summary_note:k,meeting_images:[...s,...a]};V.mutate(n,{onSuccess:()=>{j.invalidateQueries({queryKey:[x.U7.NETWORKING.GET_SELFIE_NOTE,e]}),N([]),E(!1),M(k),D([...b,...a.map(e=>e.image)]),I(!0),U(!0),g?.()}})}catch(e){console.error("Upload or save failed:",e)}},A=async e=>{if(!C||H)return;let t=Array.from(e.target.files||[]).filter(e=>e.size>0);if(t.length){let e=await Promise.all(t.map(e=>w(e)));_(t=>[...t,...e]),N(e=>[...e,...t])}},B=e=>{H||(_(t=>t.filter((t,s)=>s!==e)),N(t=>t.filter((t,s)=>s!==e)))};return F?a.jsx("div",{className:"flex justify-center items-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#ED2944]"})}):a.jsx("div",{children:(0,a.jsxs)("div",{className:"mt-1 space-y-4",children:[C&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 mb-4",children:[(0,a.jsxs)(o.C,{className:"bg-[#ED2944] text-white text-[0.8rem] text-center mx-auto border-white px-3 py-2 rounded-[29px]",children:["Met at ",a.jsx("span",{className:"ml-1 font-semibold",children:t})]}),(0,a.jsxs)(o.C,{className:"w-full flex items-center justify-center gap-2 text-[0.8rem] font-medium bg-green-500 text-black py-3 rounded-full mb-4",children:[a.jsx(c.Z,{})," Contact saved"]})]}),H&&R&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:a.jsx("p",{className:"text-blue-800 text-sm font-medium",children:"\uD83D\uDCDD Meeting information has been saved and is now read-only"})}),(0,a.jsxs)("div",{className:"flex items-stretch gap-3",children:[0===b.length&&C&&!H?(0,a.jsxs)("label",{className:"flex items-center justify-center gap-2 px-5 py-3 text-[0.8rem] bg-[#ED2944] text-white border border-white rounded-[29px] cursor-pointer",children:[a.jsx(u.Z,{})," Take an selfie",a.jsx("input",{type:"file",accept:"image/*",capture:"user",multiple:!0,onChange:A,className:"hidden"})]}):(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[b.map((e,t)=>(0,a.jsxs)("div",{className:"relative",children:[a.jsx("img",{src:e,alt:`selfie-${t}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-300"}),!H&&a.jsx("button",{onClick:()=>B(t),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600",children:"\xd7"})]},t)),C&&!H&&(0,a.jsxs)("label",{className:"flex items-center justify-center gap-2 px-3 py-2 text-[0.7rem] bg-[#ED2944] text-white border border-white rounded-lg cursor-pointer w-20 h-20",children:[a.jsx(u.Z,{})," Add",a.jsx("input",{type:"file",accept:"image/*",capture:"user",multiple:!0,onChange:A,className:"hidden"})]})]}),a.jsx("textarea",{id:"summary_note_textarea",placeholder:H?"No note available":"Write a short note...",className:`w-full min-w-[50%] min-h-[160px] p-3 text-sm rounded-lg resize-none focus:outline-none ${H?"bg-gray-100 text-gray-600 cursor-not-allowed":"text-black"}`,value:k,onChange:e=>!H&&S(e.target.value),readOnly:H})]}),Z&&!H&&a.jsx("div",{className:"flex justify-center",children:a.jsx(d.z,{onClick:()=>z(),disabled:V.isPending,className:"bg-[#ED2944] text-white px-8 py-3 rounded-full font-medium hover:bg-[#cb1f38] transition-colors",children:V.isPending?"Saving...":"Save"})}),V.isSuccess&&a.jsx("p",{className:"text-sm font-medium text-center text-green-500",children:"✓ Information saved successfully!"}),V.isPending&&a.jsx("p",{className:"text-sm font-medium text-center text-blue-500",children:"Saving information..."}),V.isError&&a.jsx("p",{className:"text-sm font-medium text-center text-red-500",children:"Failed to save users information. Please try again."}),s&&(0,a.jsxs)("a",{href:s,target:"_blank",className:"flex items-center justify-center gap-2 mt-6 w-full h-[64px] text-white bg-[#ED2944] border border-white text-[0.8rem] font-medium rounded-[29px]",children:[a.jsx(m.YG,{})," Message"]})]})})};r()}catch(e){r(e)}})},4987:(e,t,s)=>{s.d(t,{Z:()=>l});var r=s(997),a=s(9332);s(6689);let l=({to:e,fallback:t=-1})=>{let s=(0,a.useRouter)();return(0,r.jsxs)("svg",{onClick:()=>{e?s.push(e):s.back()},xmlns:"http://www.w3.org/2000/svg",width:"42",height:"42",viewBox:"0 0 48 48",children:[r.jsx("defs",{children:r.jsx("mask",{id:"ipSLeftC0",children:(0,r.jsxs)("g",{fill:"none","stroke-linejoin":"round","stroke-width":"4",children:[r.jsx("path",{fill:"#fff",stroke:"#fff",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4S4 12.954 4 24s8.954 20 20 20Z"}),r.jsx("path",{stroke:"#000","stroke-linecap":"round",d:"m27 33l-9-9l9-9"})]})})}),r.jsx("path",{fill:"currentColor",d:"M0 0h48v48H0z",mask:"url(#ipSLeftC0)"})]})}},2129:(e,t,s)=>{s.d(t,{Z:()=>a});var r=s(997);let a=()=>r.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2ZM16.6402 8.2318C17.0645 8.58537 17.1218 9.21593 16.7682 9.64021L11.7682 15.6402C11.5937 15.8497 11.3411 15.9788 11.0691 15.9976C10.797 16.0165 10.5291 15.9234 10.3273 15.74L7.32733 13.0127C6.91868 12.6412 6.88856 12.0087 7.26007 11.6001C7.63157 11.1914 8.26402 11.1613 8.67268 11.5328L10.9002 13.5578L15.2318 8.35984C15.5854 7.93556 16.2159 7.87824 16.6402 8.2318Z",fill:"#222222"})})},7213:(e,t,s)=>{s.d(t,{Z:()=>a});var r=s(997);let a=()=>(0,r.jsxs)("svg",{width:"21",height:"21",viewBox:"0 0 21 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("rect",{x:"0.5",y:"0.5",width:"20",height:"20",rx:"6",fill:"#222222"}),r.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.6709 5.08325H13.6626C13.9481 5.08324 14.1945 5.08324 14.3974 5.09981C14.6115 5.11731 14.8245 5.15594 15.0295 5.26037C15.3352 5.41616 15.5838 5.66476 15.7396 5.97052C15.8441 6.17547 15.8827 6.38847 15.9002 6.60261C15.9168 6.80551 15.9168 7.05184 15.9167 7.33738V14.8333C16.2159 14.8333 16.4584 15.0758 16.4584 15.3749C16.4584 15.6741 16.2159 15.9166 15.9167 15.9166H5.08341C4.78426 15.9166 4.54175 15.6741 4.54175 15.3749C4.54175 15.0758 4.78426 14.8333 5.08341 14.8333V11.6707C5.0834 11.3852 5.0834 11.1388 5.09997 10.9359C5.11747 10.7218 5.1561 10.5088 5.26053 10.3039C5.41632 9.99809 5.66492 9.7495 5.97068 9.5937C6.17564 9.48927 6.38863 9.45064 6.60277 9.43315C6.80567 9.41657 7.052 9.41658 7.33754 9.41659L9.41675 9.41659V7.33737C9.41674 7.05183 9.41673 6.80551 9.4333 6.60261C9.4508 6.38847 9.48943 6.17547 9.59386 5.97052C9.74966 5.66476 9.99825 5.41616 10.304 5.26037C10.509 5.15594 10.722 5.11731 10.9361 5.09981C11.139 5.08324 11.3853 5.08324 11.6709 5.08325ZM14.2917 7.79159C14.2917 7.49243 14.0492 7.24992 13.7501 7.24992H11.5834C11.2843 7.24992 11.0417 7.49243 11.0417 7.79159C11.0417 8.09074 11.2843 8.33325 11.5834 8.33325H13.7501C14.0492 8.33325 14.2917 8.09074 14.2917 7.79159ZM14.2917 9.95825C14.2917 9.6591 14.0492 9.41659 13.7501 9.41659H11.5834C11.2843 9.41659 11.0417 9.6591 11.0417 9.95825C11.0417 10.2574 11.2843 10.4999 11.5834 10.4999H13.7501C14.0492 10.4999 14.2917 10.2574 14.2917 9.95825ZM13.7501 11.5833C14.0492 11.5833 14.2917 11.8258 14.2917 12.1249C14.2917 12.4241 14.0492 12.6666 13.7501 12.6666H11.5834C11.2843 12.6666 11.0417 12.4241 11.0417 12.1249C11.0417 11.8258 11.2843 11.5833 11.5834 11.5833H13.7501Z",fill:"white"})]})},2966:(e,t,s)=>{s.d(t,{Z:()=>a});var r=s(997);s(6689);let a=()=>r.jsx("svg",{width:"27",height:"24",viewBox:"0 0 27 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.15506 3.39968L9.06001 1.49473C9.85704 0.697704 10.938 0.249939 12.0652 0.249939H14.9194C16.0466 0.249939 17.1276 0.697706 17.9246 1.49474L19.8296 3.39969C20.534 4.10417 21.4895 4.49994 22.4858 4.49994C24.5605 4.49994 26.2423 6.18178 26.2423 8.25644V19.3749C26.2423 21.7221 24.3395 23.6249 21.9923 23.6249H4.99231C2.6451 23.6249 0.74231 21.7221 0.74231 19.3749V8.25644C0.74231 6.18178 2.42415 4.49994 4.49881 4.49994C5.4951 4.49994 6.45058 4.10416 7.15506 3.39968ZM13.4923 17.7812C16.1329 17.7812 18.2736 15.6405 18.2736 12.9999C18.2736 10.3593 16.1329 8.21869 13.4923 8.21869C10.8517 8.21869 8.71106 10.3593 8.71106 12.9999C8.71106 15.6405 10.8517 17.7812 13.4923 17.7812Z",fill:"#ffffff"})})},1644:(e,t,s)=>{s.d(t,{YG:()=>n,YT:()=>i,Zm:()=>a,pA:()=>l});var r=s(997);let a=()=>r.jsx("svg",{width:"21",height:"19",viewBox:"0 0 21 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M16.5387 0H19.7589L12.7238 8.04821L21 19H14.5198L9.44431 12.3578L3.63677 19H0.414685L7.93937 10.3915L0 0H6.6447L11.2325 6.07123L16.5387 0ZM15.4086 17.0708H17.1929L5.67515 1.8279H3.7604L15.4086 17.0708Z",fill:"black"})}),l=()=>r.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M5.50475 17.3363C5.50475 17.8886 5.95247 18.3363 6.50475 18.3363H7.3304C7.88268 18.3363 8.3304 17.8886 8.3304 17.3363V10.8471C8.3304 10.2949 7.88268 9.84715 7.3304 9.84715H6.50475C5.95247 9.84715 5.50475 10.2949 5.50475 10.8471V17.3363ZM8.51388 7.22945C8.50572 6.8054 8.35894 6.45474 8.07352 6.17748C7.7881 5.90022 7.4089 5.76158 6.93592 5.76158C6.46294 5.76158 6.07763 5.90022 5.77998 6.17748C5.48233 6.45474 5.3335 6.8054 5.3335 7.22945C5.3335 7.64535 5.47825 7.99397 5.76774 8.27531C6.05724 8.55665 6.4344 8.69732 6.89923 8.69732H6.91146C7.39259 8.69732 7.77995 8.55665 8.07352 8.27531C8.36709 7.99397 8.51388 7.64535 8.51388 7.22945ZM15.6697 17.3363C15.6697 17.8886 16.1174 18.3363 16.6697 18.3363H17.4954C18.0477 18.3363 18.4954 17.8886 18.4954 17.3363V13.4679C18.4954 12.212 18.1977 11.262 17.6024 10.6178C17.0071 9.97355 16.2202 9.65143 15.2416 9.65143C14.1378 9.65143 13.2884 10.124 12.6935 11.0692C12.6898 11.075 12.694 11.0826 12.7008 11.0826C12.7056 11.0826 12.7095 11.0787 12.7095 11.0739V10.4649C12.7095 10.1237 12.433 9.84715 12.0918 9.84715H10.9304C10.3603 9.84715 9.89585 10.3221 9.89899 10.8922C9.9056 12.0916 9.90211 14.2378 9.88851 17.3306C9.88607 17.8848 10.3345 18.3363 10.8887 18.3363H11.7095C12.2618 18.3363 12.7095 17.8886 12.7095 17.3363V13.5902C12.7095 13.2803 12.7381 13.052 12.7952 12.9052C12.9175 12.6198 13.101 12.3772 13.3456 12.1774C13.5903 11.9776 13.892 11.8777 14.2508 11.8777C15.1968 11.8777 15.6697 12.5179 15.6697 13.7982V17.3363ZM21.3944 6.12855V17.8715C21.3944 18.8419 21.0499 19.6717 20.3608 20.3608C19.6717 21.0498 18.842 21.3944 17.8715 21.3944H6.12859C5.15817 21.3944 4.32842 21.0498 3.63934 20.3608C2.95025 19.6717 2.60571 18.8419 2.60571 17.8715V6.12855C2.60571 5.15813 2.95025 4.32837 3.63934 3.63929C4.32842 2.95021 5.15817 2.60567 6.12859 2.60567H17.8715C18.842 2.60567 19.6717 2.95021 20.3608 3.63929C21.0499 4.32837 21.3944 5.15813 21.3944 6.12855Z",fill:"#222222"})}),n=()=>r.jsx("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M11.0008 19.8303C6.12388 19.8303 2.17041 15.8768 2.17041 11C2.17041 6.12315 6.12388 2.16968 11.0008 2.16968C15.8776 2.16968 19.8311 6.12315 19.8311 11C19.8311 15.8768 15.8776 19.8303 11.0008 19.8303ZM8.25136 12.0328C8.25344 12.0335 8.25571 12.0332 8.25755 12.032C8.2617 12.0294 8.26726 12.0316 8.26869 12.0363C8.72801 13.5527 8.98049 14.3863 9.02613 14.537C9.03124 14.5538 9.03658 14.5702 9.04298 14.5867C9.14127 14.839 9.27424 14.8843 9.43452 14.8627C9.59979 14.8402 9.68756 14.7508 9.79544 14.6467C9.79549 14.6467 9.79547 14.6467 9.79551 14.6467C9.79645 14.6458 9.94335 14.504 10.2362 14.2213C10.5877 13.8821 11.133 13.8463 11.5256 14.1368L13.0979 15.3002C13.5083 15.527 13.8047 15.41 13.9066 14.9186L15.3704 8.01219C15.532 7.36935 15.2486 7.11152 14.7501 7.31559L6.15553 10.6354C5.56919 10.8711 5.57202 11.1991 6.04878 11.3454L8.25136 12.0328Z",fill:"#ffffff"})}),i=()=>r.jsx("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M11.0008 19.8303C6.12388 19.8303 2.17041 15.8768 2.17041 11C2.17041 6.12315 6.12388 2.16968 11.0008 2.16968C15.8776 2.16968 19.8311 6.12315 19.8311 11C19.8311 15.8768 15.8776 19.8303 11.0008 19.8303ZM8.25136 12.0328C8.25344 12.0335 8.25571 12.0332 8.25755 12.032C8.2617 12.0294 8.26726 12.0316 8.26869 12.0363C8.72801 13.5527 8.98049 14.3863 9.02613 14.537C9.03124 14.5538 9.03658 14.5702 9.04298 14.5867C9.14127 14.839 9.27424 14.8843 9.43452 14.8627C9.59979 14.8402 9.68756 14.7508 9.79544 14.6467C9.79549 14.6467 9.79547 14.6467 9.79551 14.6467C9.79645 14.6458 9.94335 14.504 10.2362 14.2213C10.5877 13.8821 11.133 13.8463 11.5256 14.1368L13.0979 15.3002C13.5083 15.527 13.8047 15.41 13.9066 14.9186L15.3704 8.01219C15.532 7.36935 15.2486 7.11152 14.7501 7.31559L6.15553 10.6354C5.56919 10.8711 5.57202 11.1991 6.04878 11.3454L8.25136 12.0328Z",fill:"#222222"})})},47:(e,t,s)=>{s.d(t,{Z:()=>a});var r=s(997);let a=()=>(0,r.jsxs)("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.708998 8.15156C1.69548 6.84599 3.24936 6 4.99993 6C6.75049 6 8.30437 6.846 9.29085 8.15156C9.29531 8.15746 9.29979 8.16338 9.30429 8.16932C9.38911 8.28149 9.48005 8.40176 9.54505 8.51779C9.62371 8.65823 9.68202 8.82069 9.6784 9.01828C9.6755 9.17712 9.62738 9.3258 9.56894 9.4432C9.5105 9.5606 9.42089 9.68862 9.29592 9.78669C9.12925 9.91748 8.9478 9.96378 8.78661 9.98311C8.64518 10.0001 8.47759 10 8.30909 10C8.3015 10 8.2939 10 8.28631 10H1.71354C1.70595 10 1.69835 10 1.69076 10C1.52226 10 1.35467 10.0001 1.21325 9.98311C1.05205 9.96378 0.8706 9.91748 0.703937 9.78669C0.578965 9.68862 0.489352 9.5606 0.430914 9.4432C0.372476 9.3258 0.324353 9.17712 0.321448 9.01828C0.317835 8.82069 0.376139 8.65823 0.454807 8.51779C0.5198 8.40176 0.610747 8.28149 0.695565 8.16932C0.700062 8.16338 0.704541 8.15745 0.708998 8.15156Z",fill:"white"}),r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.24993 2.75C2.24993 1.23122 3.48114 0 4.99993 0C6.51871 0 7.74993 1.23122 7.74993 2.75C7.74993 4.26878 6.51871 5.5 4.99993 5.5C3.48114 5.5 2.24993 4.26878 2.24993 2.75Z",fill:"white"})]})},2964:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.d(t,{F$:()=>c,Q5:()=>u,qE:()=>d});var a=s(997),l=s(6689),n=s(5458),i=s(7742),o=e([n,i]);[n,i]=o.then?(await o)():o;let d=l.forwardRef(({className:e,...t},s)=>a.jsx(n.Root,{ref:s,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));d.displayName=n.Root.displayName;let c=l.forwardRef(({className:e,...t},s)=>a.jsx(n.Image,{ref:s,className:(0,i.cn)("aspect-square h-full w-full",e),...t}));c.displayName=n.Image.displayName;let u=l.forwardRef(({className:e,...t},s)=>a.jsx(n.Fallback,{ref:s,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));u.displayName=n.Fallback.displayName,r()}catch(e){r(e)}})},2825:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.d(t,{Z:()=>d});var a=s(9752),l=s(8622),n=s(6032),i=e([a,l]);[a,l]=i.then?(await i)():i;let o=async e=>(await l.Z.get(`/networks_and_connnections/${e}/`)).data,d=(e,t)=>(0,a.useQuery)({queryKey:[n.U7.GET_CONNECTION_PROFILE,t],queryFn:()=>o(t),enabled:!!t&&!!e});r()}catch(e){r(e)}})},7773:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.d(t,{Z:()=>d});var a=s(9752),l=s(8622),n=s(6032),i=e([a,l]);[a,l]=i.then?(await i)():i;let o=async e=>(await l.Z.get(`/get-network-information/${e}/`)).data.data,d=e=>(0,a.useQuery)({queryKey:[n.U7.GET_SELFIE_NOTE,e],queryFn:()=>o(e),enabled:!!e});r()}catch(e){r(e)}})},6707:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.d(t,{Z:()=>i});var a=s(9752),l=s(8622),n=e([a,l]);[a,l]=n.then?(await n)():n;let i=()=>(0,a.useMutation)({mutationFn:async e=>(await l.Z.post("/save-network-information/",e)).data});r()}catch(e){r(e)}})},5433:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.d(t,{Z:()=>i});var a=s(9752),l=s(8622),n=e([a,l]);[a,l]=n.then?(await n)():n;let i=()=>(0,a.useMutation)({mutationFn:async({file:e,key:t})=>{let s=new FormData;s.append("file",e),s.append("key",t),console.log("Uploading file:",e.name,"Size:",e.size,"Key:",t);let r=await l.Z.post("/upload/file/",s,{headers:{"Content-Type":"multipart/form-data"}});return console.log("Upload response:",r.data),r.data},onError:e=>{console.error("Upload error:",e)}});r()}catch(e){r(e)}})},9024:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>w});var a=s(997),l=s(6689),n=s(9332),i=s(2964),o=s(4866),d=s(4987),c=s(47),u=s(1644),m=s(2825),x=s(3212),p=s(7213),h=s(757),f=s(2226),g=e([i,o,m,x,h,f]);[i,o,m,x,h,f]=g.then?(await g)():g;let w=()=>{let e=(0,n.useParams)(),t=Array.isArray(e?.id)?e.id[0]:e?.id,s="string"==typeof t?parseInt(t,10):void 0,{data:r}=(0,f.Z)(),{data:g,isLoading:w,isError:j,refetch:v}=(0,m.Z)(r?.data?.id,s),C=()=>{console.log("Selfie/note saved, refreshing connection data..."),v()};if((0,l.useEffect)(()=>{let e=[];try{let t=localStorage.getItem("locallyScannedUserIds");t&&(e=JSON.parse(t),Array.isArray(e)||(e=[]))}catch(t){console.error("Failed to parse locallyScannedUserIds:",t),e=[]}if(console.log({locallyScannedUserIds:e}),t&&r?.data){let s=Array.from(new Set([...e,parseInt(t)]));localStorage.setItem("locallyScannedUserIds",JSON.stringify(s))}},[r?.data]),w)return a.jsx("div",{className:"min-h-screen bg-[#232223] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#ED2944] mx-auto mb-4"}),a.jsx("p",{className:"text-white text-lg",children:"Loading profile..."})]})});if(console.log("Connection data:",g),console.log("Is error:",j),console.log("Connection exists:",!!g),console.log("Network ID:",g?.network_information?.id),console.log("Meeting info:",g?.network_information?.meeting_informations),j||!g)return a.jsx("div",{className:"min-h-screen bg-[#232223] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),a.jsx("p",{className:"text-red-500 text-xl",children:"Failed to load profile"}),a.jsx("p",{className:"text-gray-400 mt-2",children:"Please try again later"})]})});let b=r?.data?.user_profile;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-[#232223] via-[#1a1a1a] to-[#2d2d2d] overflow-y-auto",children:[a.jsx("div",{className:"hidden lg:block",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-8 py-8 min-h-screen",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-1 sticky top-0 z-10  py-4",children:[a.jsx(d.Z,{to:"/networks-and-connections"}),a.jsx("h1",{className:"text-3xl font-bold text-white",children:"Connection Profile"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 pb-8",children:[a.jsx("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"bg-[#2a2a2a] rounded-3xl p-6 shadow-2xl border border-gray-700 sticky top-24 h-fit",children:[a.jsx("div",{className:"flex justify-center mb-4",children:(0,a.jsxs)(i.qE,{className:"w-24 h-24 rounded-2xl shadow-xl border-4 border-[#ED2944]",children:[a.jsx(i.F$,{className:"object-cover object-center",src:g.user?.photo_url&&g.user?.photo_url.includes("http")?g.user?.photo_url:"/default.jpg"}),a.jsx(i.Q5,{className:"bg-[#ED2944] text-white text-2xl font-bold",children:g.user?.name?.[0]||"U"})]})}),a.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-3 uppercase tracking-wide",children:g.user?.name||"Unnamed"}),g?.network_information?.base_event?.name&&(0,a.jsxs)("div",{className:"bg-gradient-to-r from-[#ED2944] to-[#cb1f38] text-white px-4 py-2 rounded-xl text-center font-semibold mb-4 shadow-lg text-sm",children:["Met at ",g.network_information.base_event.name]}),a.jsx("div",{className:"flex flex-wrap gap-2 justify-center mb-4",children:g.user?.user_profile?.user_fields?.map((e,t)=>a.jsx(o.C,{className:"text-xs text-white rounded-full border-2 border-[#ED2944] bg-transparent px-3 py-1 hover:bg-[#ED2944] transition-colors",children:e?.name.toUpperCase()},t))}),(0,a.jsxs)("div",{className:"space-y-3 mb-6",children:[g.user?.user_profile?.position&&(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-[#333] rounded-xl",children:[a.jsx("div",{className:"p-1.5 bg-[#ED2944] rounded-lg",children:a.jsx(c.Z,{})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-400 text-xs",children:"Position"}),a.jsx("p",{className:"text-white font-semibold uppercase text-sm",children:g.user.user_profile.position})]})]}),g.user?.user_profile?.project_name&&(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-[#333] rounded-xl",children:[a.jsx("div",{className:"p-1.5 bg-[#ED2944] rounded-lg",children:a.jsx(p.Z,{})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-400 text-xs",children:"Project"}),a.jsx("p",{className:"text-white font-semibold uppercase text-sm",children:g.user.user_profile.project_name})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-center gap-3 mb-4",children:[g.user?.user_profile?.twitter_account&&a.jsx("a",{href:g.user.user_profile.twitter_account.includes("http")?g.user.user_profile.twitter_account:`https://x.com/${g.user.user_profile.twitter_account}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-[#333] rounded-lg hover:bg-[#ED2944] transition-colors",children:a.jsx(u.Zm,{})}),g.user?.user_profile?.linkedin_url&&a.jsx("a",{href:g.user.user_profile.linkedin_url.includes("http")?g.user.user_profile.linkedin_url:`https://linkedin.com/${g.user.user_profile.linkedin_url}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-[#333] rounded-lg hover:bg-[#ED2944] transition-colors",children:a.jsx(u.pA,{})}),g?.user?.username&&a.jsx("a",{href:`https://t.me/${g.user.username}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-[#333] rounded-lg hover:bg-[#ED2944] transition-colors",children:a.jsx(u.YT,{})})]}),(0,a.jsxs)("button",{onClick:()=>{let e=[];g.user?.user_profile?.twitter_account&&e.push({type:"twitter",url:g.user.user_profile.twitter_account.includes("http")?g.user.user_profile.twitter_account:`https://x.com/${g.user.user_profile.twitter_account}`}),g.user?.user_profile?.linkedin_url&&e.push({type:"linkedin",url:g.user.user_profile.linkedin_url.includes("http")?g.user.user_profile.linkedin_url:`https://linkedin.com/${g.user.user_profile.linkedin_url}`}),g?.user?.username&&e.push({type:"telegram",url:`https://t.me/${g.user.username}`}),e.length>0?window.open(e[0].url,"_blank"):window.open(`mailto:${g.user?.username}@example.com`,"_blank")},className:"w-full bg-gradient-to-r from-[#ED2944] to-[#cb1f38] text-white py-3 px-4 rounded-xl font-bold text-base flex items-center justify-center gap-2 hover:from-[#cb1f38] hover:to-[#a01830] transition-all shadow-lg transform hover:scale-105",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),"Message"]})]})}),a.jsx("div",{className:"lg:col-span-2",children:g?.user?.id&&(0,a.jsxs)("div",{className:"bg-[#2a2a2a] rounded-3xl p-6 shadow-2xl border border-gray-700",children:[a.jsx("h3",{className:"text-xl font-bold text-white mb-4 text-center",children:"Meeting Details"}),a.jsx("div",{className:"overflow-y-auto max-h-[80vh]",children:a.jsx(x.Z,{networkId:g?.network_information?.id,eventTitle:g?.network_information?.base_event?.name,telegramAccount:`https://t.me/${g?.user?.username}`,baseEventId:g?.network_information?.base_event?.id||1,onSaved:C})})]})})]})]})}),a.jsx("div",{className:"lg:hidden",children:(0,a.jsxs)("main",{className:"max-w-md p-4 mx-auto pt-20 bg-[#232223] min-h-screen",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 pt-4 pb-6",children:[a.jsx(d.Z,{to:"/networks-and-connections"}),a.jsx("h2",{className:"text-[20px] text-[#F4F4F4] font-medium",children:"Connection Profile"})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-6 mt-8 text-center",children:[(0,a.jsxs)(i.qE,{className:"w-[120px] h-[120px] rounded-[30px] shadow-lg",children:[a.jsx(i.F$,{className:"object-cover object-center",src:g.user?.photo_url&&g.user?.photo_url.includes("http")?g.user?.photo_url:"/default.jpg"}),a.jsx(i.Q5,{className:"bg-[#ED2944] text-white text-2xl font-bold",children:g.user?.name?.[0]||"U"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("h1",{className:"text-[28px] font-bold text-white uppercase tracking-wide",children:g.user?.name||"Unnamed"}),g?.network_information?.base_event?.name&&(0,a.jsxs)("div",{className:"bg-[#ED2944] text-white px-4 py-2 rounded-full text-sm font-medium",children:["Met at ",g.network_information.base_event.name]}),a.jsx("div",{className:"flex items-center justify-center gap-2 flex-wrap",children:g.user?.user_profile?.user_fields?.map((e,t)=>a.jsx(o.C,{className:"text-[0.8rem] text-white rounded-[20px] border-white border-[1px] bg-[#ED2944] px-3 py-1",children:e?.name.toUpperCase()},t))}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 text-sm font-medium text-gray-300",children:[g.user?.user_profile?.position&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(c.Z,{}),a.jsx("span",{className:"uppercase",children:g.user.user_profile.position})]}),g.user?.user_profile?.project_name&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(p.Z,{}),a.jsx("span",{className:"uppercase",children:g.user.user_profile.project_name})]})]})]}),a.jsx("div",{className:"w-full mt-6",children:(0,a.jsxs)("button",{onClick:()=>{let e=[];g.user?.user_profile?.twitter_account&&e.push({type:"twitter",url:g.user.user_profile.twitter_account.includes("http")?g.user.user_profile.twitter_account:`https://x.com/${g.user.user_profile.twitter_account}`}),g.user?.user_profile?.linkedin_url&&e.push({type:"linkedin",url:g.user.user_profile.linkedin_url.includes("http")?g.user.user_profile.linkedin_url:`https://linkedin.com/${g.user.user_profile.linkedin_url}`}),g?.user?.username&&e.push({type:"telegram",url:`https://t.me/${g.user.username}`}),e.length>0?window.open(e[0].url,"_blank"):window.open(`mailto:${g.user?.username}@example.com`,"_blank")},className:"w-full bg-[#ED2944] text-white py-4 px-6 rounded-[16px] font-semibold text-lg flex items-center justify-center gap-3 hover:bg-[#cb1f38] transition-colors shadow-lg",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),"Message"]})})]}),g?.user?.id&&a.jsx("div",{className:"mt-8 space-y-4",children:(0,a.jsxs)("div",{className:"bg-gray-800 rounded-[16px] p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4 text-center",children:"Meeting Details"}),a.jsx(x.Z,{networkId:g?.network_information?.id,eventTitle:g?.network_information?.base_event?.name,telegramAccount:`https://t.me/${g?.user?.username}`,baseEventId:g?.network_information?.base_event?.id||1,onSaved:C})]})})]})})]}),b&&(!b?.position||!b?.project_name)&&a.jsx(h.Z,{onOpenChange:()=>{},isOpen:!0,onComplete:v})]})};r()}catch(e){r(e)}})},2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},997:e=>{e.exports=require("react/jsx-runtime")},5315:e=>{e.exports=require("path")},1656:e=>{e.exports=import("@hookform/resolvers/zod")},5458:e=>{e.exports=import("@radix-ui/react-avatar")},49:e=>{e.exports=import("@radix-ui/react-label")},3567:e=>{e.exports=import("@radix-ui/react-select")},4338:e=>{e.exports=import("@radix-ui/react-slot")},9752:e=>{e.exports=import("@tanstack/react-query")},9648:e=>{e.exports=import("axios")},6926:e=>{e.exports=import("class-variance-authority")},6593:e=>{e.exports=import("clsx")},5641:e=>{e.exports=import("react-hook-form")},6201:e=>{e.exports=import("react-hot-toast")},8097:e=>{e.exports=import("tailwind-merge")},5725:e=>{e.exports=import("vaul")},9926:e=>{e.exports=import("zod")}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[682,54,225,757],()=>s(355));module.exports=r})();